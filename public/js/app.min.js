function submitSourceForm(e,a){$(document).on("submit",e,function(t){var o=$(this).data("id");t.preventDefault(),error.remove();var s=$(this).children().find(".button"),n=new FormData(this);s.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/film/source/"+o+"/"+a,data:n,contentType:!1,cache:!1,processData:!1,type:"POST",success:function(a){s.attr("class","button"),$("<div/>").addClass("over").appendTo("body"),$("body").append('<div class="login-dialog"><span class="closex"></span><div class="alert alert-success">'+a.message+"</div></div>"),$(e)[0].reset()},error:function(e){s.attr("class","button"),error.text(e.responseJSON.message).appendTo("#result")}})})}function play(e,a,t){$("#player").children().remove(),jwplayer("player").setup({sources:[{file:e.m18,type:"video/mp4",label:"480p"},{file:e.m22,type:"video/mp4",label:"720p"},{file:e.m36,type:"video/mp4",label:"1080p"}],image:a,title:t})}var homeUrl=$("base").attr("href"),error=$("<div/>").addClass("alert alert-danger center"),success=$("<div/>").addClass("alert alert-success center"),csrfToken=$('meta[name="csrf-token"]').attr("content");$.ajaxSetup({headers:{"X-CSRF-TOKEN":csrfToken}}),$(document).ready(function(){$(".film-name").tooltip(),$(".btn-toggle").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),$(".slide").removeClass("slide-toggle"),$(".over").remove()):($(this).addClass("on"),$(".slide").addClass("slide-toggle"),$("<div/>").addClass("over").appendTo("#content"))}),$(".search-box_button").click(function(){$(this).children().hasClass("fa-search")?($(this).children().removeClass("fa-search").addClass("fa-close"),$(".search-box_input").addClass("search-box_input_show"),$(".search-box_button_open").toggle("slide")):($(this).children().removeClass("fa-close").addClass("fa-search"),$(".search-box_input").removeClass("search-box_input_show"),$(".search-box_button_open").toggle("slide"))}),$(".icon-user").click(function(){$(".slide-collapse").toggle("scale")})}),$(document).on("submit","#login-form",function(e){e.preventDefault(),error.remove();var a=$(this).children(".button"),t=new FormData(this);a.attr("class","btn-loading"),$.ajax({url:homeUrl+"/login",data:t,contentType:!1,cache:!1,processData:!1,type:"POST",success:function(e){a.attr("class","button"),$("#login-form").remove(),success.text(e.message).appendTo("#result"),setTimeout(function(){location.href=e.redirectUrl},2e3)},error:function(e){a.attr("class","button"),error.text(e.responseJSON.message).appendTo("#result")}})}),$(document).on("submit","#register-form",function(e){e.preventDefault(),error.remove();var a=$(this).children(".button"),t=new FormData(this);a.attr("class","btn-loading"),$.ajax({url:homeUrl+"/register",data:t,contentType:!1,cache:!1,processData:!1,type:"POST",success:function(e){a.attr("class","btn"),$("#register-form").remove(),success.text(e.message).appendTo("#result"),setTimeout(function(){location.href=e.redirectUrl},2e3)},error:function(e){a.attr("class","btn"),error.text(e.responseJSON.message).appendTo("#result")}})}),$(document).on("click",".film-eposide span",function(){var e=$(this).data("eposide"),a=$(".film-eposide span.active");return!$(this).hasClass("active")&&(a.removeClass("active"),$(this).addClass("active"),void $.ajax({url:homeUrl+"/ajax/source/"+e,processData:!1,success:function(e){play(e.source,e.poster,e.name)}}))}),$(document).on("click",".film-eposide-download span",function(){var e=$(this).data("eposide"),a=$(".film-eposide-download span.active");return!$(this).hasClass("active")&&(a.removeClass("active"),$(this).addClass("active"),$("#download-div").hide(),void $.ajax({url:homeUrl+"/ajax/download/"+e,processData:!1,success:function(e){$("#download-div").show(),$("#download-m18").attr("href",e.m18),$("#download-m22").attr("href",e.m22),$("#download-m36").attr("href",e.m36)}}))}),$(document).on("click",".over, .closex",function(){$(".login-dialog").remove(),$(".over").remove()}),$(document).on("click",".report",function(){var e=$(this).data("film");$.ajax({url:homeUrl+"/ajax/report/"+e,processData:!1,success:function(e){$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("submit","#report-form",function(e){e.preventDefault(),error.remove();var a=$("input[name=film]").val(),t=$(this).children(".button"),o=new FormData(this);t.attr("class","btn-loading"),$.ajax({url:homeUrl+"/ajax/report/"+a,data:o,contentType:!1,cache:!1,processData:!1,type:"POST",success:function(e){t.attr("class","button"),$("#report-form").remove(),success.text(e.message).appendTo("#result")},error:function(e){t.attr("class","button"),console.log(e),error.text(e.responseJSON.message).appendTo("#result")}})}),$(document).on("submit","#change-pass-form",function(e){e.preventDefault(),error.remove();var a=$(this).children(".button"),t=new FormData(this);a.attr("class","btn-loading"),$.ajax({url:homeUrl+"/user/change-password",data:t,contentType:!1,cache:!1,processData:!1,type:"POST",success:function(e){a.attr("class","button"),success.text(e.message).appendTo("#result")},error:function(e){a.attr("class","button"),error.text(e.responseJSON.message).appendTo("#result")}})}),$(document).on("submit","#change-avatar-form",function(e){e.preventDefault(),error.remove();var a=$(this).children(".button"),t=new FormData(this);a.attr("class","btn-loading"),$.ajax({url:homeUrl+"/user/change-avatar",data:t,contentType:!1,cache:!1,processData:!1,type:"POST",success:function(e){a.attr("class","button"),success.text(e.message).appendTo("#result")},error:function(e){a.attr("class","button"),error.text(e.responseJSON.message).appendTo("#result")}})}),$(document).on("click","#like-button",function(e){var a=$(this).data("id"),t=this;$.ajax({url:homeUrl+"/ajax/like/"+a,processData:!1,success:function(e){e.code?($(t).children("i").css({color:"#f00"}),$(t).children("span").text("Đã thích")):($(t).children("i").css("color",""),$(t).children("span").text("Yêu thích"))}})});var selected=!1;$(document).on("click",".star-white",function(e){if(selected)return!1;var a=$(this).index(),t=$(this).parent().data("id");$(".list-star").children().removeClass("star");for(var o=0;o<=a;o++)$(".list-star .star-white:eq("+o+")").addClass("star");$.ajax({url:homeUrl+"/ajax/vote/"+t,type:"POST",data:{point:++a},async:!1,success:function(e){e.code&&(selected=!0,$(".film-vote span:eq(0)").text("BẠN ĐÃ ĐÁNH GIÁ"),$(".star-point").text(a))}})}),$(document).on("mouseover",".star-white",function(e){if(selected)return!1;for(var a=$(this).index(),t=0;t<=a;t++)$(".list-star .star-white:eq("+t+")").addClass("star");$(".star-point").text(++a)}),$(document).on("mouseleave",".star-white",function(e){return!selected&&($(".list-star").children().removeClass("star"),void $(".star-point").text(0))}),$(document).on("change","input[name=category_parent]",function(e){var a=this.value;$.ajax({url:homeUrl+"/admin/film/category",data:{id:a},success:function(e){var a="";$.each(e,function(e,t){a+='<li><input type="checkbox" name="category[]" value="'+t.id+'">'+t.name+"</li>"}),$("#dropSelect").html(a)}})}),$(document).on("click","#category_parent li",function(e){var a=$(this).children("input")[0].value;$.ajax({url:homeUrl+"/admin/film/category",data:{id:a},success:function(e){var a="";$.each(e,function(e,t){a+='<li><input type="checkbox" name="category[]" value="'+t.id+'">'+t.name+"</li>"}),$("#dropSelect").html(a)}})}),$(document).on("click",".dropSelect li",function(e){$(this).children("input")[0].checked=!0}),$(document).on("submit","#add-film-form",function(e){e.preventDefault(),error.remove();var a=$(this).children().find(".button"),t=new FormData(this);a.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/film/add",data:t,contentType:!1,cache:!1,processData:!1,type:"POST",success:function(e){a.attr("class","button"),$("<div/>").addClass("over").appendTo("body"),$("body").append('<div class="login-dialog"><span class="closex"></span><div class="alert alert-success">'+e.message+"</div></div>"),$("#add-film-form")[0].reset()},error:function(e){a.attr("class","button"),error.text(e.responseJSON.message).appendTo("#result")}})}),$(document).on("submit","#edit-film-form",function(e){e.preventDefault(),error.remove();var a=$(this).children().find(".button"),t=new FormData(this);a.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/film/edit",data:t,contentType:!1,cache:!1,processData:!1,type:"POST",success:function(e){a.attr("class","button"),$("<div/>").addClass("over").appendTo("body"),$("body").append('<div class="login-dialog"><span class="closex"></span><div class="alert alert-success">'+e.message+"</div></div>")},error:function(e){a.attr("class","button"),error.text(e.responseJSON.message).appendTo("#result")}})}),$(document).on("submit","#add-category-form",function(e){e.preventDefault(),error.remove();var a=$(this).children(".button"),t=new FormData(this);a.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/category/add",data:t,contentType:!1,cache:!1,processData:!1,type:"POST",success:function(e){a.attr("class","button"),$("<div/>").addClass("over").appendTo("body"),$("body").append('<div class="login-dialog"><span class="closex"></span><div class="alert alert-success">'+e.message+"</div></div>"),$("#add-category-form")[0].reset()},error:function(e){a.attr("class","button"),error.text(e.responseJSON.message).appendTo("#result")}})}),$(document).on("submit","#edit-category-form",function(e){e.preventDefault(),error.remove();var a=$(this).children(".button"),t=new FormData(this);a.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/category/edit",data:t,contentType:!1,cache:!1,processData:!1,type:"POST",success:function(e){a.attr("class","button"),$("<div/>").addClass("over").appendTo("body"),$("body").append('<div class="login-dialog"><span class="closex"></span><div class="alert alert-success">'+e.message+"</div></div>")},error:function(e){a.attr("class","button"),error.text(e.responseJSON.message).appendTo("#result")}})}),$(document).on("click","#upgrade-button",function(e){$.ajax({url:homeUrl+"/ajax/upgrade",success:function(e){$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#confirm-upgrade",function(e){var a=$(this);a.attr("class","btn-loading"),$.ajax({url:homeUrl+"/user/upgrade",type:"POST",success:function(e){a.attr("class","button"),$(".login-dialog").remove(),$(".over").remove(),$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#delete-film",function(e){var a=$(this).data("id");$.ajax({url:homeUrl+"/admin/film/delete",data:{id:a},success:function(e){$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#delete-source",function(e){var a=$(this).data("id");$.ajax({url:homeUrl+"/admin/film/source/"+a+"/delete",success:function(e){$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#delete-category",function(e){var a=$(this).data("id");$.ajax({url:homeUrl+"/admin/category/delete",data:{id:a},success:function(e){$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#delete-user",function(e){var a=$(this).data("id");$.ajax({url:homeUrl+"/admin/user/delete",data:{id:a},success:function(e){$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#block-user",function(e){var a=$(this).data("id");$.ajax({url:homeUrl+"/admin/user/block",data:{id:a},success:function(e){$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#upgrade-user",function(e){var a=$(this).data("id");$.ajax({url:homeUrl+"/admin/user/upgrade",data:{id:a},success:function(e){$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#confirm-delete-film",function(e){var a=$(this).data("id"),t=$(this);t.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/film/delete",type:"POST",data:{id:a},success:function(e){$(".login-dialog").remove(),$(".over").remove(),$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#confirm-delete-resource",function(e){var a=$(this).data("id"),t=$(this);t.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/film/source/"+a+"/delete",type:"POST",success:function(e){$(".login-dialog").remove(),$(".over").remove(),$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#confirm-delete-category",function(e){var a=$(this).data("id"),t=$(this);t.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/category/delete",type:"POST",data:{id:a},success:function(e){$(".login-dialog").remove(),$(".over").remove(),$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#confirm-delete-user",function(e){var a=$(this).data("id"),t=$(this);t.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/user/delete",type:"POST",data:{id:a},success:function(e){$(".login-dialog").remove(),$(".over").remove(),$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#confirm-block-user",function(e){var a=$(this).data("id"),t=$(this);t.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/user/block",type:"POST",data:{id:a},success:function(e){$(".login-dialog").remove(),$(".over").remove(),$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("click","#confirm-upgrade-user",function(e){var a=$(this).data("id"),t=$(this);t.attr("class","btn-loading"),$.ajax({url:homeUrl+"/admin/user/upgrade",type:"POST",data:{id:a},success:function(e){$(".login-dialog").remove(),$(".over").remove(),$("<div/>").addClass("over").appendTo("body"),$("body").append(e)}})}),$(document).on("keypress",".search-box_input",function(e){13==e.keyCode&&(location.href=homeUrl+"/search/?keys="+encodeURIComponent($(".search-box_input_show").val()).replace(/%20/g,"+"))}),$(document).on("click",".search-box_button_open",function(e){location.href=homeUrl+"/search/?keys="+encodeURIComponent($(".search-box_input_show").val()).replace(/%20/g,"+")}),submitSourceForm("#add-source-form","add"),submitSourceForm("#edit-source-form","edit");