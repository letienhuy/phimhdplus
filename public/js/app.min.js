var homeUrl=$("base").attr("href"),error=$("<div/>").addClass("alert alert-danger"),success=$("<div/>").addClass("alert alert-success"),csrfToken=$('meta[name="csrf-token"]').attr("content"),inputFailed=$("<span/>").addClass("input-failed").tooltip();$.ajaxSetup({headers:{"X-CSRF-TOKEN":csrfToken}}),$(document).ready(function(){$(".btn-toggle").click(function(){$(this).hasClass("on")?($(this).removeClass("on"),$(".slide").removeClass("slide-toggle"),$(".over").remove()):($(this).addClass("on"),$(".slide").addClass("slide-toggle"),$("<div/>").addClass("over").appendTo("#content"))}),$(".search-box_button").click(function(){$(this).children().hasClass("fa-search")?($(this).children().removeClass("fa-search").addClass("fa-close"),$(".search-box_input").addClass("search-box_input_show")):($(this).children().removeClass("fa-close").addClass("fa-search"),$(".search-box_input").removeClass("search-box_input_show"))}),$(".icon-user").click(function(){$(".slide-collapse").toggle("scale")})}),$(document).on("submit","#login-form",function(e){e.preventDefault(),inputFailed.remove(),error.remove();var s=($("input[name=email]"),$("input[name=password]"),$(this).children(".btn"));new FormData(this);s.attr("class","btn-loading"),$.ajax({url:homeUrl+"/login",data:$(this).serialize(),processData:!1,type:"POST",success:function(e){s.attr("class","btn"),$("#login-form").remove(),success.text(e.message).appendTo("#result"),setTimeout(function(){location.href=e.redirectUrl},2e3)},error:function(e){s.attr("class","btn"),error.text(e.responseJSON.message).appendTo("#result")}})}),$(document).on("submit","#register-form",function(e){e.preventDefault(),inputFailed.remove(),error.remove();var s=$("input[name=email]"),t=$("input[name=password]"),a=($("input[name=confirm_password]"),$(this).children(".btn"));new FormData(this);return a.attr("class","btn-loading"),""===s.val()?(a.attr("class","btn"),inputFailed.appendTo(s.parent()),error.text("Vui lòng nhập email!").appendTo("#result"),!1):""===t.val()?(a.attr("class","btn"),error.text("Vui lòng nhập mật khẩu!").appendTo("#result"),!1):void $.ajax({url:homeUrl+"/register",data:$(this).serialize(),processData:!1,type:"POST",success:function(e){a.attr("class","btn"),$("#register-form").remove(),success.text(e.message).appendTo("#result"),setTimeout(function(){location.href=e.redirectUrl},2e3)},error:function(e){a.attr("class","btn"),error.text(e.responseJSON.message).appendTo("#result")}})});